import{r as s,W as K,q as Y,j as e,a as q,b as y,g,d as X}from"./app-CmMHBtRm.js";import{A as J}from"./AlertDialog-DTt_Baj7.js";import{A as Q}from"./AuthenticatedLayout-BMwXgHnR.js";import"./transition-t7xN9JIs.js";import"./index-BFRJqtLk.js";import"./js.cookie-Cz0CWeBA.js";const ie=({DBsync:N})=>{const p="YOUR_SECRET_API_KEY",o=s.useRef(),[c,S]=s.useState(null),[b,w]=s.useState(null),[f,P]=s.useState(null),[j,z]=s.useState(null),[v,C]=s.useState(null),[k,Z]=s.useState(!0),[ee,m]=s.useState(),[ae,E]=s.useState(),l=s.useRef(null),[A,T]=s.useState(!1),{data:i,setData:B,post:te}=K({connections:null,Vehicle:null,Device:null,User:null,Schedule:null}),{props:D}=Y(),M=["connections","Vehicle","Device","User","Schedule"],h=async(a,t)=>{try{const r=(await y({method:"GET",url:`http://${g()}${a}`,headers:{"Content-Type":"application/json","api-key":p}})).data;t(r.data),l.current=r.data}catch(n){l.current=!1,console.error(`Error fetching data from ${a}:`,n)}},d=async(a,t,n)=>{try{const x=(await y({method:"POST",url:`http://${g()}${a}`,headers:{"Content-Type":"application/json","api-key":p},data:t})).data;n(x.data),l.current=!0}catch(r){l.current=!1,console.error(`Error fetching data from ${a}:`,r)}},$=()=>{h("/api/users",S),h("/api/devices",w),h("/api/connections",P),h("/api/vehicles",z),console.log("retriveDataFromMongoDB"),T(!0)},F=()=>{console.log("retriveDataFromMariaDB"),o.current=N};s.useEffect(()=>($(),()=>{}),[A]),s.useEffect(()=>(o.current=[],F(),()=>{o.current=[]}),[]);const[R,U]=s.useState({id:"663662aea3de738f421270ae"}),[u,V]=s.useState("");s.useEffect(()=>{async function a(t){try{const r=(await y({method:"GET",url:`http://${g()}/api/fetch-placement?id=${t}`,headers:{"Content-Type":"application/json","api-key":p}})).data;return C(r.data.data),r.data}catch(n){return console.error(`Error fetching data from ${endpoint}:`,n),null}}return c&&u!==""&&c.map(async t=>{t._id===R.id&&await a(t._id)}),()=>{}},[c,u]);const _=a=>{V(a),U({id:a})},O=async()=>{try{d("/api/connections",{type:"addConnectin",message:"syncData",data:i.connections},m),d("/api/vehicles",{type:"addvehicles",message:"syncData",data:i.Vehicle},m),d("/api/devices",{type:"adddevices",message:"syncData",data:i.Device},m),d("/api/login",{type:"addUser",message:"syncData",data:i.User},m),d("/api/add-placement",{data:{vehicleSp:{name:"benz01",position:{x:4.152522,y:.2631281,z:.009116761}},devicesSp:[{name:"placement, Boss stereo speakers",position:{x:.0533,y:.815,z:.437}},{name:"placement, Speedmeters Display Dash Monitor",position:{x:-.5,y:1.1225,z:.5855}},{name:"placement, Samsung Super Fast Dual Car Charger",position:{x:.432,y:1.2852,z:-.7239}},{name:"placement, Touch Screen Entertainment System AC ControlzC",position:{x:.0098,y:.707,z:-.4223}},{name:"placement, Window Switch Door Lock Front Driver Side with Mirror Switch",position:{x:.0639,y:.8054,z:.2059}},{name:"placement, Rearview Camera",position:{x:1.255,y:.9035,z:.415}},{name:"placement, Car TV Screen Rear Seat Entertainment System",position:{x:0,y:.641,z:-3.45}}]},IDs:c},E)}catch{}},I=()=>{o.current&&o.current.map((a,t)=>{B(n=>({...n,[M[t]]:a}))})},W=()=>e.jsx(e.Fragment,{children:v&&u==="663662aea3de738f421270aa"&&e.jsx("div",{className:"absolute top-0 left-0 z-10 w-full h-full flex justify-center items-center bg-gray-800 bg-opacity-75",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 relative",children:[e.jsx("span",{className:"w-10 h-10 absolute top-4 right-0",children:e.jsx(X,{href:"#",children:"X"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:D.auth.user.name}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Placement Data"}),e.jsx("table",{className:"w-full",children:e.jsx("tbody",{children:Object.entries(v).map(([a,t],n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:`${a}`}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:`${t}`})]},n))})})]})})});return e.jsx(e.Fragment,{children:e.jsxs(Q,{user:D.auth.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"WEB-APP/Server Resources"}),children:[e.jsx(q,{title:"WEB-APP/Server Resources"}),e.jsx(W,{}),e.jsx("div",{className:"container mx-auto p-8 dark:text-gray-200",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx("input",{type:"text",name:"search",id:"search",value:u,onChange:a=>_(a.target.value),className:"border dark:bg-gray-800 border-gray-300 rounded-full px-4 py-2 w-full focus:outline-none focus:border-blue-500",placeholder:"Search..."})}),k&&e.jsxs("div",{className:"space-y-8 relative",children:[e.jsxs("div",{className:"mongo-data",children:[e.jsx("h1",{className:"text-2xl font-bold dark:text-gray-200 mb-4",children:l.current?"MongoDB Sync: Authorized":"MongoDB Sync: Unauthorized"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Users Data:"}),e.jsx("ul",{className:"overflow-y-auto overflow-x-hidden max-h-56",children:c.map((a,t)=>e.jsx("li",{className:"mb-2",children:a._id},t))})]}),b&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Devices Data:"}),e.jsx("ul",{className:"overflow-y-auto overflow-x-hidden max-h-56",children:b.map((a,t)=>e.jsx("li",{className:"mb-2",children:a._id},t))})]}),f&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connections Data:"}),e.jsx("ul",{className:"overflow-y-auto overflow-x-hidden max-h-56",children:f.map((a,t)=>e.jsx("li",{className:"mb-2",children:a._id},t))})]}),j&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Vehicles Data:"}),e.jsx("ul",{className:"overflow-y-auto overflow-x-hidden max-h-56",children:j.map((a,t)=>e.jsx("li",{className:"mb-2",children:a._id},t))})]})]})]}),e.jsxs("div",{className:"maria-data",children:[e.jsx("h1",{className:"text-2xl font-bold dark:text-gray-200 mb-4",children:l.current?"HeidiData Sync MongoDB : Authorized":"HeidiData Sync MongoDB: Unauthorized"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.current&&o.current.map((a,t)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-md p-4",children:e.jsx("table",{className:"table-auto w-full",children:e.jsx("tbody",{children:Object.entries(a).map(([n,r],x)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"font-semibold py-2 px-4",children:n}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("table",{children:e.jsx("tbody",{children:Object.entries(r).map(([L,G],H)=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 px-2 font-semibold",children:L}),e.jsx("td",{className:"py-1 px-2",children:G})]},H))})})})]},x))})})},t))})]}),e.jsx("div",{className:"action",children:i.connections?e.jsx(J,{title:"Data Synchronization Successful",message:"The data synchronization process has completed successfully. All systems are now up-to-date with the latest information, ensuring consistency and accuracy across the platform. If you have any questions or encounter any issues, please contact our support team for assistance. Thank you for your attention.",onClose:O}):e.jsx("button",{className:"bg-blue-500 absolute top-0 right-0 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:I,children:"Synchronize Data"})})]})]})})]})})};export{ie as default};
